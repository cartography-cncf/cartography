{
    "statements": [
    {
        "__comment": "Junk node created for not managed Employees",
        "query": "MATCH (n:HiBobEmployee{id: 'None'}) DETACH DELETE (n)",
        "iterative": false
    },    
    {
      "query": "MATCH (n:HiBobEmployee) WHERE n.lastupdated <> $UPDATE_TAG WITH n LIMIT $LIMIT_SIZE DETACH DELETE (n)",
      "iterative": true,
      "iterationsize": 100
    },
    {
      "query": "MATCH (n:HiBobDepartment) WHERE n.lastupdated <> $UPDATE_TAG WITH n LIMIT $LIMIT_SIZE DETACH DELETE (n)",
      "iterative": true,
      "iterationsize": 100
    },
    {
        "query": "MATCH (n:Human) WHERE n.lastupdated <> $UPDATE_TAG WITH n LIMIT $LIMIT_SIZE DETACH DELETE (n)",
        "iterative": true,
        "iterationsize": 100
    },
    {
      "query": "MATCH (:HiBobEmployee)-[r:MANAGED_BY]->(:HiBobEmployee) WHERE r.lastupdated <> $UPDATE_TAG WITH r LIMIT $LIMIT_SIZE DELETE (r)",
      "iterative": true,
      "iterationsize": 100
    },
    {
        "query": "MATCH (:HiBobEmployee)-[r:MEMBER_OF]->(:HiBobDepartment) WHERE r.lastupdated <> $UPDATE_TAG WITH r LIMIT $LIMIT_SIZE DELETE (r)",
        "iterative": true,
        "iterationsize": 100
    },
    {
        "query": "MATCH (:Human)-[r:IS_EMPLOYEE]->(:HiBobDepartment) WHERE r.lastupdated <> $UPDATE_TAG WITH r LIMIT $LIMIT_SIZE DELETE (r)",
        "iterative": true,
        "iterationsize": 100
    }
],
    "name": "cleanup HiBob users data"
  }
  